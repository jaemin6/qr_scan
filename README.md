프로젝트 제목  
=============

qr코드 인식 (일반 카메라 환경에서 발생할 수 있는 흔들림, 조명 반사, QR 코드 훼손, 먼 거리 촬영 등의 상황에서도 인식률을 최대화하도록 설계)

# 진행 상황
- [피드백 진행](/feedback/0814.md)


## 관련 제품 링크
- [동행 복권](https://dhlottery.co.kr/common.do?method=main)

## 한계점
- qr의 일정 부분 이상 손상, 해상도가 너무 낮은 카메라, 실.내외 어둡거나 빛 반사가 심한 곳

## 개선점
- AI 모델에 다양한 손상·훼손 데이터를 학습시켜 복원 성능 강화, qr뿐 아니라 바코드, nfc 통합, 자동 조명 조정




# 8/18

====================
## 현재 상태의 문제점 정리

### 문제점 시각화
#### 인식 정확도 문제: 
QR 코드의 각도나 조명이 좋지 않은 환경에서 인식이 실패하는 경우

#### 반복 인식 문제: 
같은 QR 코드가 화면에 계속 인식될 때마다 "QR 인식됨" 메시지가 반복적으로 출력되는 경우. 현재 if data != last_data: 조건으로 어느 정도 방지하고 있지만, QR 코드를 잠깐 가렸다가 다시 보여주면 다시 인식되는 등 사용성 측면에서 보완이 필요함

#### 브라우저 자동 열기 문제: 
webbrowser.open(data) 부분이 주석 처리되어 있어, 현재 코드는 QR 코드를 인식하더라도 자동으로 브라우저를 열지 않습니다. 터미널에 주소가 출력되지만, 사용자가 직접 Ctrl+Click을 해야 하는 불편함이 있음

### 문제점 문서화
#### 인식 정확도 문제: 
어두운 조명, 카메라와의 거리가 너무 가깝거나 멀 때, QR 코드의 일부가 가려졌을 때 인식률이 낮아지는 문제가 발생

#### 성능 문제: 
저사양 웹캠이나 컴퓨터에서 QR 코드가 복잡하거나 여러 개일 때, 프레임이 끊기거나 인식 속도가 지연

#### 사용성 문제: 
터미널에 출력된 URL을 사용자가 직접 Ctrl + Click해야 하는 불편함이 있음,
인식 성공 후 'QR 인식 성공' 메시지만 뜨고 어떤 QR 코드인지 화면에 표시되지 않아 사용자가 혼란을 겪을 수 있음
성공적으로 QR 코드를 인식한 후에도 웹캠 창이 계속 열려있어, Q를 눌러 수동으로 종료해야 함

## 목표 상태 정의, 성공 기준 설정

### 현재 상태
#### QR 인식 정확도: 
다양한 조명 및 각도에서 QR 코드를 인식하지 못하는 경우가 잦음

#### 사용성: 
QR 코드 인식 후 터미널에 주소가 출력되지만, 사용자가 직접 수동으로 URL을 클릭해야 함

#### 시각적 피드백: 
인식 성공 시 'QR 인식 성공' 메시지만 출력되며, 어떤 URL이 인식되었는지 화면에서 바로 확인하기 어려움

#### 처리 속도: 
QR 코드 인식 후 브라우저를 열기까지 추가적인 사용자 조치가 필요하므로 전체 프로세스 지연

### 목표 상태

#### QR 인식 정확도: 
모든 일반적인 실내 조명 조건에서 90% 이상의 인식 성공률 달성

#### 자동화된 사용성: 
웹캠이 URL 형태의 QR 코드를 인식하면, 사용자의 추가 조치 없이 자동으로 웹 브라우저가 해당 URL을 열도록 구현

#### 향상된 시각적 피드백: 
인식된 URL을 웹캠 화면의 경계 상자 근처에 텍스트로 출력하여 사용자가 바로 확인할 수 있도록 함

#### 효율적인 처리: 
한 번 QR 코드를 인식하고 브라우저를 연 후, 웹캠 창을 자동으로 닫아 불필요한 리소스 사용을 막고 프로세스를 완료


### 측정 지표
#### 정확도 측정: 
다양한 환경(밝기, 각도, 거리)에서 QR 코드 100개를 테스트하여 올바르게 인식한 횟수를 기록, 목표는 90회 이상

#### 속도 측정: 
QR 코드가 화면에 나타난 순간부터 브라우저가 열리기까지의 시간을 측정하여 3초 이내로 단축하는 것을 목표

#### 안정성 측정: 
웹캠을 5분간 연속으로 실행하여 QR 코드를 인식하고 브라우저를 연 후 프로그램이 종료되는 전체 프로세스에서 에러가 발생하지 않는 횟수를 측정

#### 사용성 평가: 
테스트 후 동료에게 "QR 인식 후 바로 브라우저가 열려서 편리한가?"와 같은 질문을 통해 사용 편의성을 1-10점 척도로 평가, 8점 이상을 목표로 함



# 8/19
==========================
## 현재 상태의 문제점
1. qr 스캔 인식 개선을 위해 yolo, 노이즈제거, 자동 명암 조절, roi 디코딩 까지 많은 변수와 라이브러리를 적용했지만 before/after 인임을 비교하기위해 기존 캠과 개선 된 코드를 비교하면 오히려 기존 캠 ver이 인식률이 더 높은 결과를 보임

2. 개선된 코드가 오히려 더 많은 노이즈를 제공 될 수 있다는 점, 기존 캠과 비교 방식 자체가 중복된 작업 향상으로 이미 처음 성공했다면, 두 번째 작업은 불필요한 연산만 추가하여 성능을 떨어뜨릴 수 있음

3. 같은 전처리 과정이 모든 환경에서 항상 인식률을 높여주는것이 아님, 때로는 미묘한 qr코드 패턴을 손상시켜 오히려 인식을 방해할 수 있음

## 목표 상태
1. 다시 처음으로 돌아가 코드를 개선, before/after 인식률 시각화를 위한 다른 방법 물색



# 8/20
=====================================
## 현재 상태
1. 지금껏 다양한 기술을 접했을 때 제일 효과적인 그레이스케일과 히스토그램 평활활를 사용, 그 외 불필요한 컨투어나 기타 전처리 기술은 철저히 제외하고 코드의 가독성을 높임

2. 실제 이미지를 찍어 로보플로우로 데이터 학습화시킴, 기존 qr스캔 인식률(다양한 각도, 구겨짐, 훼손)을 높여 프로그램 완성도를 높임
- 로보플로우로 데이터 부족한 문제를 해결, 변형된 데이터를 만들어 모델이 다양한 환경을 학습할 수 있었음
- 견고한 모델 구축, 데이터 증강을 통해 빛 반사, 어두운 환경, 다양한 각도, 약간의 훼손에도 훨씬 높은 성능을 보임

## 해야 할 일
1. 로보플로우에서 학습 된 모델 테스트 하기

2. 그에 맞춰 코드 수정

3. 학습시킨 모델 불러오기